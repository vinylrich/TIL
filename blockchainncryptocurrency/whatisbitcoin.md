# 비트코인이란 무엇인가

## 개요

비트코인은 암호화폐이다. 모두가 장부를 공유하는데 어떻게 모든 정보를 지키고 이것이 작동할 수 있는 것일까?

비트코인은 중앙 은행의 대체제로 사용되어야하기 때문에 은행이 하는 일을 해야한다.

은행이 하는 일들 중 대표적인 2가지는
1. 장부를 안전하게 보관 즉, 누가 누구에게 송금했고, 누가 얼마를 예금했는지 등을 위변조 없이 보관해야한다.
2. 장부에 문제가 없는지 검사해야한다.

이 두가지이다. 

## 블록 구조

블록체인(비트코인)에서는 기존의 중앙화된 은행이 모든 장부를 보관한 방식을 탈중앙화함으로써 모든 노드(사용자)가 항상 모든 거래 내역을 공유하고 있다.

하지만 여기서 주제의 의문이 생긴다. 모든 장부가 공유되면 막강한 컴퓨팅 파워를 가진 사람이 위변조를 할 수 있지 않냐?

예를 들어 anne이 준우에게 500원을 줬다. 라는 내역과 준우가 ben에게 600원을 줬다. 라는 내역이 있다고 생각해보자.

거래 내역을 그냥 string형태로 보관하면 어디가 잘못됐는지 쉽게 파악할 수 없다. 하지만 hash function은 토씨 하나라도 바뀌면 모든 문자열이 바뀌기 때문에
위변조가 되었는지 쉽게 알아차릴 수 있다.

예를 들어 공유된 장부를 누군가가 anne이 준우에게 510원을 준걸로 위조했다고 가정해보자.

이는 단순히 숫자 한 자리만 바뀌지만 hash function을 사용하면 모든 문자열이 바뀌기 때문에 원본 데이터랑 내용이 다른지 쉽게 알아차릴 수 있다.

그리고 단순히 hash function으로 만들어진 string으로만 거래 내역을 공유하기엔 관리하기 쉽지 않고 hash 기존에 있던 hash function과 비교하는 과정이 복잡하기 때문에 prior hash와 hash를 같이 저장한다.
또한 Prior hash와 hash를 함께 저장하면 장부를 변조하는 과정은 변조하려는 해시의 기점부터 그 다음 해시까지 전부를 변조해야 하기 때문에 엄청난 컴퓨팅 파워가 든다.



이 막강한 컴퓨팅 파워를 가진 사람은 쉽게 위변조할 수 있다.

블록을 해킹하여 위변조 한다고 해도 모든 거래 내역이 공유되고 있으니 실제 트렌잭션에 반영되지 않는다.

블록이 실제 트랜잭션에 반영이 되는 과정은

비트코인은 POW(proof of work)의 방식을 사용하는데,
트랜잭션(거래) 발생 -> mempool에 들어감 -> miner들의 정직한 장부와 함께 문제를 품 -> 맞추는 사람이 보상을 받음 -> 트랜잭션에 실제 반영됨